<!DOCTYPE html>
<html class="nl" lang="nl" dir="ltr">
<head>
<meta charset="UTF-8" />
<style>

</style>
</head>

<body>

<div id="ossy-sprite" style="background-image:url(sprites/hosting-home__ossy-sprite.png)"></div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="javascript/jquery.sprite-animator.js"></script>
<script>
    // Insert Ossy animation
    var ossyAnimating = false;
    var idleVariants = ['knipperen', 'liggen', 'omkijken', 'kwispelen'];
    var ossySprite = $('#ossy-sprite');
    var ossySpriteAnimator = ossySprite.spriteAnimator({
        debug: true,
        bottom: 200,
        left: 100,
        cols: 6,
        rows: 4
    });
    ossySpriteAnimator.addScript('pootje', [
        {sprite:22, delay:100},
        {sprite:23, delay:100},
        {sprite:24, delay:3000},
        {sprite:23, delay:100}
    ]);
    ossySpriteAnimator.addScript('kwispelen', [
        {sprite:11},
        {sprite:12},
        {sprite:13},
        {sprite:14},
        {sprite:13},
        {sprite:12},
        {sprite:11},
        {sprite:10},
        {sprite:11},
        {sprite:12},
        {sprite:13},
        {sprite:14},
        {sprite:13},
        {sprite:12},
        {sprite:11},
        {sprite:10}
    ]);
    ossySpriteAnimator.addScript('liggen', [
        {sprite: 10},
        {sprite: 9},
        {sprite: 8},
        {sprite: 7},
        {sprite: 6},
        {sprite: 5},
        {sprite: 4},
        {sprite: 3},
        {sprite: 2, delay:3000},
        {sprite: 1}
    ]);
    ossySpriteAnimator.addScript('staan', [
        {sprite: 1, delay:2000},
        {sprite: 2, delay:1000},
        {sprite: 1},
        {sprite: 2, delay:1000},
        {sprite: 3},
        {sprite: 4, delay:1000},
        {sprite: 5},
        {sprite: 6},
        {sprite: 7},
        {sprite: 8},
        {sprite: 9},
        {sprite: 10, delay:1000}
    ]);
    ossySpriteAnimator.addScript('omkijken', [
        {sprite: 10},
        {sprite: 16},
        {sprite: 17, delay:1000},
        {sprite: 16},
        {sprite: 10},
        {sprite: 18},
        {sprite: 19},
        {sprite: 20},
        {sprite: 21, delay:1000},
        {sprite: 20},
        {sprite: 19},
        {sprite: 18},
        {sprite: 10}
    ]);
    ossySpriteAnimator.addScript('knipperen', [
        {sprite:10, delay:5000},
        {sprite:15, delay:350}
    ]);

    ossySprite.on('pootje', function(){
        new Log('Ossy: pootje');
        ossySprite.trigger('play', {
            run:1,
            delay:100,
            script: 'pootje',
            onStop: function(){
                new Log('Ossy: done pootje');
                ossySprite.trigger('knipperen');
            }
        });
    });

    ossySprite.on('kwispelen', function(){
        new Log('Ossy: kwispelen');
        ossySprite.trigger('play', {
            run:1,
            delay:100,
            script: 'kwispelen',
            onStop: function(){
                new Log('Ossy: done kwispelen');
                ossySprite.trigger('knipperen');
            }
        });
    });
    
    ossySprite.on('liggen', function(){
        new Log('Ossy: liggen');
        ossySprite.trigger('play', {
            run:1,
            delay:100,
            script: 'liggen',
            onStop: function(){
                new Log('Ossy: done liggen');
                ossySprite.on('mousemove', function(event){
                    $(this).off('mousemove');
                    ossySprite.trigger('staan');
                });
            }
        });
    });

    ossySprite.on('staan', function(){
        new Log('Ossy: staan');
        ossySprite.trigger('play', {
            run:1,
            delay:100,
            script: 'staan',
            onStop: function(){
                new Log('Ossy: done staan');
                ossySprite.trigger('knipperen');
            }
        });
    });

    ossySprite.on('omkijken', function(){
        new Log('Ossy: omkijken');
        ossySprite.trigger('play', {
            run:1,
            delay:100,
            script: 'omkijken',
            onStop: function(){
                new Log('Ossy: done omkijken');
                ossySprite.trigger('knipperen');
            }
        });
    });

    ossySprite.on('knipperen', function(){
        new Log('Ossy: knipperen');
        ossySprite.trigger('play', {
            run: 3,
            delay:100,
            script: 'knipperen',
            onStop: function(){
                new Log('Ossy: done knipperen');
                ossySprite.trigger(idleVariants[randomize(0, (idleVariants.length-1))]);
            }
        });
    });
    ossySprite.trigger('knipperen');
    
    // On click/touch trigger pootje anim
    ossySprite.on('touchstart click', function(event){
        event.preventDefault();
        if (ossySprite.data('spriteAnimator').currentSprite() === 10) {
            ossySprite.trigger('pootje');
        }
    });
    
    // On tab hide/show trigger staan/liggen anim
    var visibilityState, visibilityChange; 
    if (typeof document.hidden !== 'undefined') {
        visibilityChange = 'visibilitychange';
        visibilityState = 'hidden';
    } else if (typeof document.mozHidden !== 'undefined') {
        visibilityChange = 'mozvisibilitychange';
        visibilityState = 'mozHidden';
    } else if (typeof document.msHidden !== 'undefined') {
        visibilityChange = 'msvisibilitychange';
        visibilityState = 'msHidden';
    } else if (typeof document.webkitHidden !== 'undefined') {
        visibilityChange = 'webkitvisibilitychange';
        visibilityState = 'webkitHidden';
    }
    $(document).on(visibilityChange, function(event){
        if (document[visibilityState]) {
            ossySprite.trigger('goToSprite', 1);
        } else {
            ossySprite.trigger('staan');
        }
    });
    




    // Log function, outputs only if in development
    function Log(logline) {
      if (typeof console !== 'undefined') {
        console.log(logline);
      }
    }
    
    // Randomize function
    randomize = function (min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    };

</script>

</body>
</html>
